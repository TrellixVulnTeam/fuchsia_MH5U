header = """
// Copyright 2020 The Fuchsia Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
"""
autogen_warning = """
// Warning:
// This file was autogenerated by cbindgen.
// Do not modify this file manually.
//
// To update or regenerate the file, run
// > fx build
// > cd src/storage/extractor/c
// > fx gen-cargo //src/storage/extractor/c:_disk_extractor_rustc_static
// > cbindgen $PWD/ -o $PWD/extractor.h -c cbindgen.toml
//
// clang-format off
"""

include_guard = "SRC_STORAGE_EXTRACTOR_C_EXTRACTOR_H_"
language = "CPP"

cpp_compat = true

documentation_style = "c99"

[parse]
parse_deps = true
exclude = ["crc", "thiserror", "zerocopy"]
include = ["disk_extractor_lib"]

[parse.expand]
all_features = true


[export]
# Explicitly declare types to export as cbindgen seems to have trouble
# detecting their usage.
include = [ "ExtentProperties", "DataKind", "ExtentKind" ]

item_types = ["constants", "enums", "structs", "opaque", "functions"]

[export.rename]
"ExtentProperties" = "ExtentProperties"
"ExtentKind" = "ExtentKind"
"DataKind" = "DataKind"
"ExtentProperties" = "ExtentProperties"
"Error" = "Error"
"CResult" = "CResult"
# To avoid names collisions, rename opaque rust Extractor structure to
# ExtractorRust.
"Extractor" = "ExtractorRust"

[enum]
rename_variants = "None"

[fn]
must_use = "__attribute__((__warn_unused_result__))"
sort_by = "None"
